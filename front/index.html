<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<a href="http://v26-web.douyinvod.com/86549ca645081e5199d5a3009e423b99/65492094/video/tos/cn/tos-cn-v-ce396d/o4tGI4K6dMHuFJ2DugAmEvWsQQflAyCTI8zhWh/?a=6383&ch=10010&cr=3&dr=0&lr=all&cd=0%7C0%7C0%7C3&cv=1&br=1288&bt=1288&cs=0&ds=4&ft=bvTKJbQQqU-zfJ0ZPo0OW_EklpPiXIncJFVJEtCpBQCPD-I&mime_type=video_mp4&qs=0&rc=ODk6PGVlZmc3NmY2NmU2NUBpamh1Z2Y6ZjY5azQzNDY6M0BjMDM1XjNgNmExYzFeMTUtYSNibWZxcjRvXi5gLS1kLS9zcw%3D%3D&btag=e00020000&dy_q=1699287625&feature_id=f0150a16a324336cda5d6dd0b69ed299&l=202311070020253EB2A850E88A514DD4BC"
   download>download</a>
<script>
    downloadFile('http://v26-web.douyinvod.com/86549ca645081e5199d5a3009e423b99/65492094/video/tos/cn/tos-cn-v-ce396d/o4tGI4K6dMHuFJ2DugAmEvWsQQflAyCTI8zhWh/?a=6383&ch=10010&cr=3&dr=0&lr=all&cd=0%7C0%7C0%7C3&cv=1&br=1288&bt=1288&cs=0&ds=4&ft=bvTKJbQQqU-zfJ0ZPo0OW_EklpPiXIncJFVJEtCpBQCPD-I&mime_type=video_mp4&qs=0&rc=ODk6PGVlZmc3NmY2NmU2NUBpamh1Z2Y6ZjY5azQzNDY6M0BjMDM1XjNgNmExYzFeMTUtYSNibWZxcjRvXi5gLS1kLS9zcw%3D%3D&btag=e00020000&dy_q=1699287625&feature_id=f0150a16a324336cda5d6dd0b69ed299&l=202311070020253EB2A850E88A514DD4BC', 'test.mp4')

    function downloadFile(url, filename) {
        // 跨域
        fetch(url, {
            headers: new Headers({
                Origin: location.origin,
            }),
            mode: 'cors',
        })
            .then(res => {
                if (res.status === 200) {
                    // 返回的.blob()为promise，然后生成了blob对象，此方法获得的blob对象包含了数据类型，十分方便
                    return res.blob()
                }
                throw new Error(`status: ${res.status}.`)
            })
            .then(blob => {
                download(blob, filename)
            })
    }

    function download(blob, filename) {
        console.log(blob)
        const a = document.createElement('a')
        a.download = filename
        const blobUrl = URL.createObjectURL(blob)
        a.href = blobUrl
        document.body.appendChild(a)
        a.click()
        a.remove()
        URL.revokeObjectURL(blobUrl)
    }

</script>
</body>
</html>